<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>URL Redirect</title>
    <meta name="referrer" content="no-referrer">  <!-- 可选，推荐添加 -->
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/encoding-japanese@2.0.0/encoding.min.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const keywords_utf8_encoded = urlParams.get('keywords');
        const baseUrl = urlParams.get('baseUrl');

        if (keywords_utf8_encoded && baseUrl) {
            let keywords_utf8_decoded = decodeURIComponent(keywords_utf8_encoded);

            const eucjp_bytes = Encoding.convert(keywords_utf8_decoded, {
                to: 'EUCJP',
                from: 'UTF8',
                type: 'array'
            });

            let keywords_eucjp_encoded = '';
            for (let i = 0; i < eucjp_bytes.length; i++) {
                keywords_eucjp_encoded += '%' + eucjp_bytes[i].toString(16).toUpperCase();
            }

            let finalUrl = baseUrl + '&keywords=' + keywords_eucjp_encoded;
            window.location.href = finalUrl;
        } else {
            document.body.innerText = "Error: Missing parameters.";
        }
    </script>
</body>
</html>
